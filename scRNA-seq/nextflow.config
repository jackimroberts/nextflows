// Include shared configuration
includeConfig '../shared.config'

params {
    cellRanger_transcriptome = "/uufs/chpc.utah.edu/common/home/hcibcore/atlatl/data/Mouse/GRCm39/10x_star/refdata-gex-GRCm39-2024-A"
}

process {
    // scRNA-seq specific setting
    beforeScript = 'module load singularity'
    
    // scRNA-seq specific process settings
    withName: run_cellranger {
        memory = { 32.GB + ((task.attempt - 1) * 16.GB) }
        cpus = 8
    }
    
    withName: seurat_markdown {
        memory = { 32.GB + ((task.attempt - 1) * 16.GB) }
        cpus = 8
    }
    
    withName: run_velocyto {
        memory = { 16.GB + ((task.attempt - 1) * 8.GB) }
        cpus = 8
    }

    // Override get_fastq with additional cluster options for scRNA-seq
    withName: get_fastq {
        memory = { 16.GB + ((task.attempt - 1) * 8.GB) }
        cpus = 8
        clusterOptions = "--ntasks=8"
    }
}