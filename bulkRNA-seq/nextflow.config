// Include shared configuration
includeConfig '../shared.config'

params {
    genome_blacklist = "${projectDir}/../refs/mm39.excluderanges.bed"
    database = "/uufs/chpc.utah.edu/common/home/hcibcore/atlatl/data/Mouse/GRCm39/release112"
    transcriptome_index = "${params.database}/star50"
    rsem_index = "${params.database}/rsem/RSEM"
    gene_models = "${params.database}/*gtf"
    fastq_screen = "/uufs/chpc.utah.edu/common/home/hcibcore/atlatl/app/fastq_screen/v0.14.0/fastq_screen"
    fastq_screen_config = "${projectDir}/bin/fastqscreen.conf"
}

singularity {
    enabled = true
}

process {
    // bulkRNA-seq specific process settings
    withName: star_align {
        memory = { 48.GB + ((task.attempt - 1) * 16.GB) }
        cpus = 8
    }

    withName: adapter_trim {
        memory = { 16.GB + ((task.attempt - 1) * 2.GB) }
        cpus = 4
    }
    
    withName: filter_bams {
        memory = { 48.GB + ((task.attempt - 1) * 8.GB) }
        cpus = 8
    }

    withName: merge_run_bams {
        memory = { 16.GB + ((task.attempt - 1) * 8.GB) }
        cpus = 4
    }
    
    // Load singularity module only for container processes
    beforeScript = 'module load singularity'



}